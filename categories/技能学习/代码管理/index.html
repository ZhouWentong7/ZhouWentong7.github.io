<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="robots" content="noindex"><meta><title>分类: 代码管理 - 在代码中遨游</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="在代码中遨游"><meta name="msapplication-TileImage" content="/img/bamboo.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="在代码中遨游"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="每天都在浪里个浪~~~~"><meta property="og:type" content="blog"><meta property="og:title" content="在代码中遨游"><meta property="og:url" content="https://zhouwentong7.github.io/"><meta property="og:site_name" content="在代码中遨游"><meta property="og:description" content="每天都在浪里个浪~~~~"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://zhouwentong7.github.io/img/og_image.png"><meta property="article:author" content="Zhou"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://zhouwentong7.github.io/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://zhouwentong7.github.io"},"headline":"在代码中遨游","image":["https://zhouwentong7.github.io/img/og_image.png"],"author":{"@type":"Person","name":"Zhou"},"publisher":{"@type":"Organization","name":"在代码中遨游","logo":{"@type":"ImageObject","url":{"text":"一个小角落"}}},"description":"每天都在浪里个浪~~~~"}</script><link rel="icon" href="/img/bamboo.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/github.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/">一个小角落</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="My Github" href="https://github.com/ZhouWentong7"><i class="fab fa-github"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><div class="card-content"><nav class="breadcrumb" aria-label="breadcrumbs"><ul><li><a href="/categories">分类</a></li><li><a href="/categories/%E6%8A%80%E8%83%BD%E5%AD%A6%E4%B9%A0/">技能学习</a></li><li class="is-active"><a href="#" aria-current="page">代码管理</a></li></ul></nav></div></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2025-08-21T11:26:57.000Z" title="2025/8/21 20:26:57">2025-08-21</time>发表</span><span class="level-item"><time dateTime="2025-08-21T11:26:57.949Z" title="2025/8/21 20:26:57">2025-08-21</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E6%8A%80%E8%83%BD%E5%AD%A6%E4%B9%A0/">技能学习</a><span> / </span><a class="link-muted" href="/categories/%E6%8A%80%E8%83%BD%E5%AD%A6%E4%B9%A0/%E4%BB%A3%E7%A0%81%E7%AE%A1%E7%90%86/">代码管理</a></span><span class="level-item">28 分钟读完 (大约4247个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2025/08/21/Docker%E5%9F%BA%E7%A1%80/">Docker基础</a></p><div class="content"><h1 id="%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5" tabindex="-1">基本概念</h1>
<p>Docker中三个重要的基本概念：镜像、容器、仓库。</p>
<h2 id="%E9%95%9C%E5%83%8F%EF%BC%88image%EF%BC%89" tabindex="-1" id="镜像（Image）">镜像（Image）</h2>
<p>操作系统分为<strong>内核</strong>和<strong>用户空间</strong>。</p>
<p>Linux为例，用户所有的操作在自动挂在的root文件系统之下。Docker镜像就相当于一个root文件系统，只是包含了应用程序所需要的所有东西。</p>
<p>《Docker从入门到实践》中给出对镜像的定义：</p>
<blockquote>
<p>是一个特殊的文件系统，除了提供容器运行时所需要的程序、库、资源和配置灯文件外，还包含了一些为运行时准备的一些配置参数（如匿名卷、环境变量、用户等）。镜像不包含任何动态数据，其内容在构建后也不会被改变。</p>
</blockquote>
<p>特性：分层存储<br>
Docker中通过镜像来创建一个或多个容器。就像是程序里面的类和实例化的关系。</p>
<p>镜像是静态的，在容器中修改不会改变镜像的内容。</p>
<h2 id="%E5%AE%B9%E5%99%A8%EF%BC%88container%EF%BC%89" tabindex="-1" id="容器（Container）">容器（Container）</h2>
<p>本质是进程，但是运行于完全属于自己的命名空间，有自己的文件系统、网络配置、进程空间、用户ID空间等。</p>
<p>像自己在一个独立于宿主机的系统上操作，这种隔离带来了安全性的提升。</p>
<p>镜像是分层的，容器也是分层的。以镜像为基础层，其上构建一个自己的<strong>容器存储层</strong>（可读可写）。</p>
<p>容器是<strong>易失的</strong>（不能持久化存储数据）。想持久化存储数据，可以使用数据卷或者绑定宿主目录。</p>
<h2 id="%E4%BB%93%E5%BA%93" tabindex="-1" id="仓库">仓库</h2>
<p>镜像构建完成后，可以方便地在宿主机上云霄，但若想在其他主机运行镜像，则需要<strong>存储和分发</strong>。<strong>Docker Registry</strong>就提供了这样的服务。</p>
<p>注册服务（Registry）将大量镜像分为多个仓库，每仓库有多个标签（Tag），每个标签对应一个镜像（Image)。</p>
<p>如一个Ubuntu镜像，仓库名为<code>ubuntu</code>，其标签通常是版本，如<code>22.04</code>，<code>24.04</code>。 那么可以使用<code>ubuntu:24.04</code>表示需要的版本的镜像。如果没有指定标签，则默认为最新版本的镜像。</p>
<p><strong>Docker Registry</strong>支持多用户环境，完整仓库名多为<code>username/softwarename</code> ，类似<code>yyy/ubuntu:22.04</code>。</p>
<p>若不包含用户名，则指向官方镜像仓库。</p>
<h1 id="%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4" tabindex="-1">基本命令</h1>
<h2 id="docker-run" tabindex="-1" id="docker-run"><code>docker run</code></h2>
<p>从一个镜像创建一个容器并运行它：</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run &lt;options&gt; &lt;image&gt; &lt;command&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>&lt;options&gt;</code>：run的可用选项</li>
<li><code>&lt;image&gt;</code>：使用的镜像</li>
<li><code>&lt;cmmand&gt;</code>：创建容器后立刻执行的命令
<ul>
<li>如果这个命令执行完后返回，则容器也会终止</li>
<li>如果这个命令是一种挂起，如后端服务或者开启终端，则容器会一直运行。需要手动终止。</li>
</ul>
</li>
</ul>
<p>例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run alpine:latest echo &quot;Hello world!&quot;</span><br></pre></td></tr></table></figure>
<p>先从本地寻找这个镜像，没有的话则会从官方查找并下载：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"> (base) **➜**  **~** docker run alpine echo &quot;hello world&quot;          </span><br><span class="line"></span><br><span class="line">Unable to find image &#x27;alpine:latest&#x27; locally</span><br><span class="line"></span><br><span class="line">latest: Pulling from library/alpine</span><br><span class="line"></span><br><span class="line">6e174226ea69: Pull complete </span><br><span class="line"></span><br><span class="line">Digest: sha256:4bcff63911fcb4448bd4fdacec207030997caf25e9bea4045fa6c8c44de311d1</span><br><span class="line"></span><br><span class="line">Status: Downloaded newer image for alpine:latest</span><br><span class="line"></span><br><span class="line">hello world</span><br></pre></td></tr></table></figure>
<ol>
<li>查找本地镜像，没有则下载到本地</li>
<li>用准备好的镜像创建新的容器并启动</li>
<li>执行command</li>
<li>执行后<strong>终止容器（并非删除）</strong></li>
</ol>
<p><code>docker run</code>常见命令选项:</p>
<ul>
<li><code>-d/ --detach</code>:在后台运行容器并显示容器id</li>
<li><code>-e/ --env &lt;variable=&lt;value&gt;</code>：设置环境变量</li>
<li><code>--rm</code>: 容器完成运行后删除容器
<ul>
<li><code>docker run --rm &lt;Image&gt;</code></li>
</ul>
</li>
<li><code>--name &lt;name&gt;</code>：为创建的容器明明</li>
<li><code>-p/ --publish &lt;host_port&gt;:&lt;container_port&gt;</code>：容器中的端口映射到宿主机上</li>
<li><code>-it</code>：使用交互模式（开启标准输入）并分配未伪终端（可执行exit退出）</li>
</ul>
<p>所以，命令可以变为：</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --rm -it ubuntu</span><br></pre></td></tr></table></figure>
<h2 id="docker-build" tabindex="-1" id="docker-build"><code>docker build</code></h2>
<p>构建镜像</p>
<p>常见选项:</p>
<ul>
<li><code>-f/--file</code>，用于指定构建使用的Dockerfile</li>
<li><code>-t/--tag</code>：为镜像命名并添加tag</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -f path/to/Dockerfile -t test:1.0 .</span><br></pre></td></tr></table></figure>
<p>后续会介绍如何写dockerfile</p>
<p>注意：命令最后有一个<code>.</code>。</p>
<h2 id="docker-images" tabindex="-1" id="docker-images"><code>docker images</code></h2>
<p>列出本地拥有的镜像。</p>
<h2 id="docker-ps" tabindex="-1" id="docker-ps"><code>docker ps</code></h2>
<p>列出正在运行的容器。</p>
<ul>
<li><code>-a</code> 列出所有容器（包括没有运行的）</li>
</ul>
<h2 id="%E5%85%B6%E4%BB%96%E5%91%BD%E4%BB%A4" tabindex="-1" id="其他命令">其他命令</h2>
<table>
<thead>
<tr>
<th>命令示例</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>docker exec &lt;options&gt; &lt;container&gt; &lt;command&gt;</code></td>
<td>在一个正在运行的容器中执行命令</td>
</tr>
<tr>
<td><code>docker attach &lt;options&gt; &lt;container&gt;</code></td>
<td>连接到后台运行的容器，按下 <code>CTRL+P CTRL+Q</code> 可以断开连接</td>
</tr>
<tr>
<td><code>docker start &lt;options&gt; &lt;containers&gt;</code></td>
<td>启动一个或多个已停止运行的容器</td>
</tr>
<tr>
<td><code>docker stop &lt;options&gt; &lt;containers&gt;</code></td>
<td>停止一个或多个正在运行的容器</td>
</tr>
<tr>
<td><code>docker rm &lt;options&gt; &lt;containers&gt;</code></td>
<td>删除一个或多个容器</td>
</tr>
<tr>
<td><code>docker rmi &lt;options&gt; &lt;images&gt;</code></td>
<td>删除一个或多个镜像</td>
</tr>
<tr>
<td><code>docker cp &lt;options&gt; &lt;container&gt;:&lt;src_path&gt; &lt;dest_path&gt;</code> 或 <code>docker cp &lt;options&gt; &lt;src_path&gt; &lt;container&gt;:&lt;dest_path&gt;</code></td>
<td>在宿主机和容器间复制文件/文件夹</td>
</tr>
</tbody>
</table>
<h3 id="%E4%B8%80%E4%B8%AA%E4%BD%BF%E7%94%A8%E6%B5%81%E7%A8%8B%E6%A1%88%E4%BE%8B" tabindex="-1" id="一个使用流程案例">一个使用流程案例</h3>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">(base) **➜**  **~** docker run -it --rm -d ubuntu         </span><br><span class="line"></span><br><span class="line">Unable to <span class="built_in">find</span> image &#x27;ubuntu:latest&#x27; locally</span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">latest: <span class="title">Pulling</span> <span class="title">from</span> <span class="title">library</span>/<span class="title">ubuntu</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">49<span class="title">a8ca9a328e</span>: <span class="title">Pull</span> <span class="title">complete</span> </span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Digest</span>: <span class="title">sha256</span>:7<span class="title">c06e91f61fa88c08cc74f7e1b7c69ae24910d745357e0dfe1d2c0322aaf20f9</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Status</span>: <span class="title">Downloaded</span> <span class="title">newer</span> <span class="title">image</span> <span class="title">for</span> <span class="title">ubuntu:latest</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">afa04e1f18cfcc6f89003ac3ed9d962393806a66ef4b8bc1a7455f91b36e978a</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">(<span class="title">base</span>) **➜**  **~** <span class="title">docker</span> <span class="title">ps</span>                    </span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">CONTAINER</span> <span class="title">ID</span>   <span class="title">IMAGE</span>     <span class="title">COMMAND</span>       <span class="title">CREATED</span>         <span class="title">STATUS</span>         <span class="title">PORTS</span>     <span class="title">NAMES</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">afa04e1f18cf</span>   <span class="title">ubuntu</span>    &quot;/<span class="title">bin</span>/<span class="title">bash</span>&quot;   8 <span class="title">seconds</span> <span class="title">ago</span>   <span class="title">Up</span> 8 <span class="title">seconds</span>             <span class="title">laughing_clarke</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">(<span class="title">base</span>) **➜**  **~** <span class="title">docker</span> <span class="title">attach</span> <span class="title">afa04e1f18cf</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">root</span>@<span class="title">afa04e1f18cf</span>:/#</span></span><br></pre></td></tr></table></figure>
<p>使用attach就是将这个容器挂在前台</p>
<p>然后使用ctl+P和ctrol+Q连续按退出容器，但没有停止运行。</p>
<p>使用<code>docker stop &lt;container_id&gt;</code>停止。</p>
<h2 id="%E5%88%A0%E9%99%A4%E9%95%9C%E5%83%8F" tabindex="-1" id="删除镜像">删除镜像</h2>
<p>要删除一个镜像，首先需要全部保证其容器全部暂停</p>
<h1 id="%E4%BD%BF%E7%94%A8dockerfile%E5%AE%9A%E5%88%B6%E9%95%9C%E5%83%8F" tabindex="-1">使用Dockerfile定制镜像</h1>
<h2 id="%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95" tabindex="-1" id="基本语法">基本语法</h2>
<p>Dockerfile是一种脚本文件。</p>
<h3 id="from-%3Cimage%3E" tabindex="-1" id="FROM-image"><code>FROM &lt;image&gt;</code></h3>
<p>指定基础镜像，我们定制的镜像在基础镜像之上构建</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FROM ubuntu:22.04</span><br></pre></td></tr></table></figure>
<h3 id="run-%3Ccommand%3E" tabindex="-1" id="RUN-command"><code>RUN &lt;command&gt;</code></h3>
<p>在镜像中执行命令，是常用指令。</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RUN <span class="built_in">echo</span> -e &quot;hello.&quot; &gt; text.txt</span><br></pre></td></tr></table></figure>
<p>此外，exec格式的写法为：</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RUN [&quot;可执行文件&quot;， &quot;参数<span class="number">1</span>&quot;， &quot;参数<span class="number">2</span>&quot;]</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RUN [&quot;apt&quot;, &quot;install&quot;, &quot;vim&quot;]</span><br></pre></td></tr></table></figure>
<h3 id="workdir-%3Cdir_path%3E" tabindex="-1" id="WORKDIR-dir-path"><code>WORKDIR &lt;dir_path&gt;</code></h3>
<p>指定工作目录(当前目录，相对路径就是相对于当前目录的)，不存在则会自动创建</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">WORKDIR /app</span><br></pre></td></tr></table></figure>
<h3 id="copy-%3Csrc_paths%3E-%3Cdest_path%3E" tabindex="-1" id="COPY-src-paths-dest-path"><code>COPY &lt;src_paths&gt; &lt;dest_path&gt;</code></h3>
<p>用于复制文件，将构建上下文目录中<code>&lt;src_paths&gt;</code>的文件/目录，复制到新一层镜像的<code>&lt;dest_path&gt;</code>位置</p>
<ul>
<li>
<p>在构建镜像时，把 <strong>宿主机上的文件或目录</strong> 复制到 <strong>镜像中的指定路径</strong>。</p>
</li>
<li>
<p>常用于将应用代码、配置文件、脚本等放进镜像里。</p>
</li>
<li>
<p><code>&lt;src&gt;</code>：源文件或目录路径（相对 Dockerfile 所在目录，也可以是构建上下文里的路径）。</p>
</li>
<li>
<p><code>&lt;dest&gt;</code>：容器内的目标路径（通常写绝对路径，如 /app/）。</p>
</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 把当前目录下的所有文件复制到容器的 /app 目录</span><br><span class="line"><span class="built_in">COPY</span> . /app</span><br><span class="line"></span><br><span class="line"># 复制单个文件</span><br><span class="line"><span class="built_in">COPY</span> requirements.txt /app/requirements.txt</span><br><span class="line"></span><br><span class="line"># 复制多个文件到同一个目标目录</span><br><span class="line"><span class="built_in">COPY</span> main.py config.yaml /app/</span><br></pre></td></tr></table></figure>
<p>也可以写作</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">COPY [&quot;main.py&quot;,&quot;config.yaml&quot;,&quot;/app/&quot;]</span><br></pre></td></tr></table></figure>
<h3 id="env-%3Ckey1%3E%3D%3Cvalue1%3E-%3Ckey2%3E%3D%3Cvalue2%3E" tabindex="-1" id="ENV-key1-value1-key2-value2"><code>ENV &lt;key1&gt;=&lt;value1&gt; &lt;key2&gt;=&lt;value2&gt;</code></h3>
<h3 id="expose-%3Cports%3E" tabindex="-1" id="EXPOSE-ports"><code>EXPOSE &lt;ports&gt;</code></h3>
<p><strong>声明</strong>容器暴露的端口，帮助使用者理解镜像打算用什么端口，方便配置端口映射。<strong>只是声明，并非自动进行端口映射。</strong></p>
<h3 id="cmd-%3Ccommand%3E" tabindex="-1" id="CMD-command"><code>CMD &lt;command&gt;</code></h3>
<p>作为容器启动命令，即创建容器并自动立即执行的命令，可以被<code>docker run &lt;image&gt; &lt;command&gt;</code>中提供的命令替换。</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">CMD</span> [&quot;可执行文件&quot;， &quot;参数<span class="number">1</span>&quot;， &quot;参数<span class="number">2</span>&quot;]</span><br></pre></td></tr></table></figure>
<h2 id="%E5%AE%8C%E6%95%B4dockerfile" tabindex="-1" id="完整Dockerfile">完整Dockerfile</h2>
<h3 id="%E7%AE%80%E5%8D%95%E7%9A%84cpp%E7%8E%AF%E5%A2%83" tabindex="-1" id="简单的CPP环境">简单的CPP环境</h3>
<p>在文件夹下创建一个cpp的main文件，写一个简单的输出：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Hello, CPP docker!&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>dockerfile:</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">FROM ubuntu</span><br><span class="line"></span><br><span class="line">RUN apt update</span><br><span class="line"></span><br><span class="line">ENV DEBIAN_FRONTEND=noninteractive</span><br><span class="line"></span><br><span class="line">RUN apt install -y build-essential</span><br><span class="line"></span><br><span class="line">WORKDIR /usr/src/cpp</span><br><span class="line"></span><br><span class="line"># 将main.cpp从宿主机复制到上述文件夹下</span><br><span class="line">COPY main.cpp .</span><br><span class="line"></span><br><span class="line">RUN g++ -o main main.cpp</span><br><span class="line"></span><br><span class="line">CMD [&quot;./main&quot;]</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>创建：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(base) ➜  cpp1 docker build -t cpp-env:1.0 .</span><br></pre></td></tr></table></figure>
<p>执行：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">(base) ➜  cpp1 docker run --rm cpp-env:1.0    </span><br><span class="line">```               </span><br><span class="line">&gt; Hello, CPP docker!</span><br><span class="line"></span><br><span class="line">### 如果需要多个文件编译，可以使用makefile等</span><br><span class="line"></span><br><span class="line">### 构建简单的DL环境</span><br><span class="line">在文件下创建Dockerfile：</span><br><span class="line">&gt;GPT 生成的DL环境，适用与Win和Mac</span><br><span class="line"></span><br><span class="line">```dockerfile</span><br><span class="line">FROM condaforge/miniforge3</span><br><span class="line"></span><br><span class="line">WORKDIR /workspace</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 避免 Python 输出缓冲</span><br><span class="line">ENV PYTHONUNBUFFERED=1</span><br><span class="line"></span><br><span class="line"># 安装系统依赖</span><br><span class="line">RUN apt-get update &amp;&amp; apt-get install -y --no-install-recommends \</span><br><span class="line">    git wget curl vim build-essential ca-certificates \</span><br><span class="line">    &amp;&amp; rm -rf /var/lib/apt/lists/*</span><br><span class="line"></span><br><span class="line"># 安装通用 PyTorch（CPU 版本），兼容 Windows/Linux/Mac</span><br><span class="line"># 安装 Python + PyTorch</span><br><span class="line">RUN conda install -y python=3.11 \</span><br><span class="line">    pytorch torchvision torchaudio -c pytorch -c conda-forge \</span><br><span class="line">    &amp;&amp; conda clean -a -y</span><br><span class="line"></span><br><span class="line"># 安装其他数据科学库</span><br><span class="line">RUN conda install -y numpy pandas matplotlib seaborn scikit-learn jupyterlab tqdm opencv \</span><br><span class="line">    -c conda-forge \</span><br><span class="line">    &amp;&amp; conda clean -a -y</span><br><span class="line"># 设置 PyTorch MPS（Mac GPU）环境变量</span><br><span class="line">ENV PYTORCH_ENABLE_MPS_FALLBACK=1</span><br><span class="line"></span><br><span class="line"># 可选：复制项目代码</span><br><span class="line"># COPY . /workspace</span><br><span class="line"></span><br><span class="line"># 暴露 Jupyter Lab 端口</span><br><span class="line">EXPOSE 8888</span><br><span class="line"></span><br><span class="line"># 默认启动 Jupyter Lab</span><br><span class="line">CMD [&quot;jupyter&quot;, &quot;lab&quot;, &quot;--ip=0.0.0.0&quot;, &quot;--allow-root&quot;, &quot;--no-browser&quot;]</span><br></pre></td></tr></table></figure>
<p>创建镜像：</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -t dl-env:<span class="number">1</span>.<span class="number">0</span> .</span><br></pre></td></tr></table></figure>
<p>构建镜像：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dl-env docker run -it --rm -p 8888:8888 -v $(pwd):/workspace dl-env:1.0 </span><br></pre></td></tr></table></figure>
<p>启动一个基于 dl-env 镜像的容器，启用 GPU，进入交互模式，把宿主机当前目录挂载到容器 /workspace，并把容器里的 <strong>JupyterLab (8888)</strong> 映射到宿主机的 <strong>8888 端口</strong>。</p>
<ul>
<li>–rm 参数的作用是 <strong>容器停止后自动删除容器</strong>。</li>
<li>也就是说，你关闭 Jupyter Lab 或按 Ctrl+C 停止容器后，Docker 会自动清理这个容器。</li>
<li>优点：不会占用磁盘空间。</li>
<li>缺点：如果你在容器里修改了数据，但没有挂载本地目录，修改的数据会丢失。</li>
</ul>
<p>根据控制台的输出，可以进入jupyter notebook的页面。</p>
<h2 id="%E9%95%9C%E5%83%8F%E6%98%AF%E5%A6%82%E4%BD%95%E6%9E%84%E5%BB%BA%E7%9A%84" tabindex="-1" id="镜像是如何构建的">镜像是如何构建的</h2>
<p>镜像具有<strong>分层存储</strong>的特性，而Dockerfile的<strong>每一行命令</strong>都会建立一个新的层。每一层都在上一层基础上机械能修改，每层构建后不会再发生改变，任何改变都只发生在自己的层，而不会影响前面的层。</p>
<p>假设有个Dockerfile：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">FROM python:3.11-slim      # Layer 1: 基础镜像</span><br><span class="line">RUN apt-get update &amp;&amp; apt-get install -y git wget  # Layer 2: 系统依赖</span><br><span class="line">COPY requirements.txt /workspace/                # Layer 3: 拷贝文件</span><br><span class="line">RUN pip install -r /workspace/requirements.txt  # Layer 4: Python依赖</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>Layer 1</strong>：Python 基础镜像，所有使用 Python 镜像的 Dockerfile 都可以复用。</li>
<li><strong>Layer 2</strong>：安装 git/wget，只在这个 Dockerfile 中生成。</li>
<li><strong>Layer 3</strong>：拷贝 requirements.txt 文件，只在这一步修改时重新构建。</li>
<li><strong>Layer 4</strong>：安装 Python 库，基于 Layer 3 增量构建。</li>
</ul>
<p><strong>好处：</strong></p>
<ul>
<li>如果你修改了 requirements.txt，只有 Layer 3 和 Layer 4 会重新构建，Layer 1 和 Layer 2 可以复用缓存。</li>
<li>生成的镜像体积更小，因为共享了重复的层。</li>
</ul>
<h2 id="%E6%9E%84%E5%BB%BA%E9%95%9C%E5%83%8F%E4%B8%8A%E4%B8%8B%E6%96%87" tabindex="-1" id="构建镜像上下文">构建镜像上下文</h2>
<p><code>docker build</code>命令的最后那个<code>.</code>。</p>
<p>文件系统中<code>.</code>表示当前目录，但是在Dockerfile中，路径是由<code>-f</code>指定的，这个<code>.</code>值得是上下文路径。</p>
<blockquote>
<p>一般来说，dockerfile都会在项目的根目录下，所以<code>.</code>是最常用的。</p>
</blockquote>
<p>在这个路径显得文件会被上传用于构建镜像，所以 Docker <strong>只能访问上下文里的文件</strong>，上下文外的文件无法被 COPY 或 ADD。</p>
<p>例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">FROM python:3.11-slim</span><br><span class="line">COPY requirements.txt /workspace/</span><br><span class="line">RUN pip install -r /workspace/requirements.txt</span><br><span class="line">COPY . /workspace/</span><br></pre></td></tr></table></figure>
<ul>
<li><code>COPY requirements.txt /workspace/</code><br>
→ 只能复制 <strong>构建上下文内</strong> 的 requirements.txt。如果你写了 <code>../requirements.txt</code>，Docker 会报错。</li>
<li><code>COPY . /workspace/</code><br>
→ 把上下文里的所有文件都复制到容器 <code>/workspace</code>。</li>
</ul>
<p>也可以看出，如果上下文很大，则构建速度会很慢，可以写<code>.dockerignore</code>文件排除不需要的文件夹和文件，例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">data/</span><br><span class="line">*.log</span><br><span class="line">.git/</span><br></pre></td></tr></table></figure>
<h2 id="%E6%9B%B4%E5%AE%9E%E9%99%85%E7%9A%84%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AFdjiango" tabindex="-1" id="更实际的使用场景Djiango">更实际的使用场景Djiango</h2>
<p>略</p>
<h2 id="%E5%A4%9A%E9%98%B6%E6%AE%B5%E6%9E%84%E5%BB%BA" tabindex="-1" id="多阶段构建">多阶段构建</h2>
<p>之前都是一次性完成所有的构建，最终得到的镜像里面除了可执行文件之外，还有原始项目文件、编译库等，但其实，以C++为例，编译后无需再利用原始代码和库，可以在任意ubuntu下运行，这些只会增加镜像大小。</p>
<p>所以使用多阶段构建，将构建过程分成多个阶段完成，每一个FROM都是一个阶段的开始：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"># build</span><br><span class="line"></span><br><span class="line">FROM ubuntu AS builder</span><br><span class="line"></span><br><span class="line">RUN apt update</span><br><span class="line"></span><br><span class="line">ENV DEBIAN_FRONTEND=noninteractive</span><br><span class="line"></span><br><span class="line">RUN apt install -y build-essential</span><br><span class="line"></span><br><span class="line">WORKDIR /usr/src/cpp</span><br><span class="line"></span><br><span class="line">COPY main.cpp .</span><br><span class="line"></span><br><span class="line">RUN g++ -o main main.cpp</span><br><span class="line"></span><br><span class="line"># runtime</span><br><span class="line">FROM ubuntu AS runtime</span><br><span class="line"></span><br><span class="line">COPY --from=builder /usr/src/cpp/main .</span><br><span class="line"></span><br><span class="line">CMD [&quot;./main&quot;]</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>可以看到image的大小明显缩水：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">base) ➜  cpp2 docker images</span><br><span class="line">REPOSITORY                 TAG       IMAGE ID       CREATED             SIZE</span><br><span class="line">cpp-env                    2.0       9e41e2c5e16a   2 minutes ago       101MB</span><br><span class="line">dl-env                     1.0       b971fb0aaaec   About an hour ago   8.18GB</span><br><span class="line">cpp-env                    1.0       7d22325bcd01   About an hour ago   465MB</span><br></pre></td></tr></table></figure>
<ul>
<li>builder 阶段用来做 “重的编译工作”，不影响最终镜像大小</li>
</ul>
<p>第二阶段也不一定非要使用ubuntu，可以换位scrach这种纯空的镜像，在里面安装cpp使用的库。</p>
<h1 id="%E6%95%B0%E6%8D%AE%E7%AE%A1%E7%90%86" tabindex="-1">数据管理</h1>
<p>持久化数据需求。</p>
<p>后端代码更新后，需要重新构建镜像并创建新的容器，则原来的容器中的数据就消失了。</p>
<p>可以使用Docker的数据卷和挂在主机目录两种方式来避免这个问题。</p>
<h2 id="%E6%95%B0%E6%8D%AE%E5%8D%B7" tabindex="-1" id="数据卷">数据卷</h2>
<p>一个可供一个或多个容器使用的特殊目录，可以绕过Docker的联合文件系统：</p>
<ul>
<li>容器间共享</li>
<li>对其的修改立刻生效</li>
<li>对数据卷的更新不影响镜像</li>
<li>数据卷默认一直存在，即使容器被删除</li>
</ul>
<h3 id="%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%8D%B7" tabindex="-1" id="创建数据卷">创建数据卷</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker volume create &lt;vol_name&gt;</span><br></pre></td></tr></table></figure>
<h3 id="%E6%9F%A5%E7%9C%8B%E6%95%B0%E6%8D%AE%E5%8D%B7" tabindex="-1" id="查看数据卷">查看数据卷</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker volume ls</span><br></pre></td></tr></table></figure>
<h3 id="%E6%9F%A5%E7%9C%8B%E6%89%80%E6%9C%89%E6%95%B0%E6%8D%AE%E5%8D%B7%E4%BF%A1%E6%81%AF" tabindex="-1" id="查看所有数据卷信息">查看所有数据卷信息</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker volume inspect &lt;vol_name&gt;</span><br></pre></td></tr></table></figure>
<h3 id="%E6%8C%82%E5%9C%A8%E6%95%B0%E6%8D%AE%E5%8D%B7" tabindex="-1" id="挂在数据卷">挂在数据卷</h3>
<p>在docker run的时候挂在数据卷</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --rm --mount source=&lt;vol_name&gt;,target= path/to/data</span><br></pre></td></tr></table></figure>
<p>例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker run -it --rm \</span><br><span class="line">    --mount source=mydata,target=/workspace/data \</span><br><span class="line">    dl-env:1.0 /bin/bash</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意</p>
<ol>
<li><strong>不要留空格</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">--mount source=mydata,target=/workspace/data   # 正确</span><br><span class="line">--mount source=mydata, target=/workspace/data  # ❌ 空格会报错</span><br></pre></td></tr></table></figure>
</li>
<li>–mount 是 <strong>推荐的新语法</strong>，比 -v mydata:/workspace/data 更明确，尤其是生产环境。</li>
<li>target <strong>必须是容器内路径</strong>，不能是宿主机路径。</li>
</ol>
</blockquote>
<h3 id="%E5%88%A0%E9%99%A4%E5%8D%B7" tabindex="-1" id="删除卷">删除卷</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker volume rm mydata</span><br></pre></td></tr></table></figure>
<h2 id="%E6%8C%82%E8%BD%BD%E4%B8%BB%E6%9C%BA%E7%9B%AE%E5%BD%95" tabindex="-1" id="挂载主机目录">挂载主机目录</h2>
<p>挂载主机目录必须使用<strong>绝对路径</strong>，默认权限为<strong>读写</strong>。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker run -it --rm \</span><br><span class="line">    --mount type=bind,source=/path/on/host,target=/workspace \</span><br><span class="line">    dl-env:1.0 /bin/bash</span><br></pre></td></tr></table></figure>
<ul>
<li>type=bind → 表示挂载主机目录</li>
<li>source → 宿主机目录</li>
<li>target → 容器内路径</li>
</ul>
<p>可以增加<code>readonly</code>选项控制<strong>只读</strong>。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker run --name web_backend \</span><br><span class="line">	--mount type=bind,source=/usr/apps/web_database,target=/app/database,readonly \</span><br><span class="line">	backend</span><br></pre></td></tr></table></figure>
<p>也可挂载主机文件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker run --name web_backend \</span><br><span class="line">	--mount type=bind,source=/usr/apps/web_app/.env,target=/app/.env,readonly \</span><br><span class="line">	backend </span><br></pre></td></tr></table></figure>
<p>可以多个挂载：<br>
略（多写几行–mount)</p>
<h1 id="docker-compose" tabindex="-1">Docker Compose</h1>
<p>一个大项目往往需要多个应用组成，需要输入多个Docker命令，且数据卷挂载和容器间通信更为糟糕。</p>
<p>Compose就是一个<strong>容器集群快速编排</strong>的工具。</p>
<p>使用YAML文件配置项目容器集群，并通过<code>docker compose</code>快速启动</p>
<h2 id="%E9%85%8D%E7%BD%AE%E4%B8%80%E7%BB%84%E5%AE%B9%E5%99%A8" tabindex="-1" id="配置一组容器">配置一组容器</h2>
<p><code>Docker-Compose.yml</code>选项与Docker命令基本一致，只是需要改为YAML写法。</p>
<p>下面是GPT给的一个前后端案例：</p>
<p>假设你有一个 Django Web 项目 + PostgreSQL 数据库。</p>
<p>我们用 Docker Compose 管理 <strong>两个服务</strong>：</p>
<ol>
<li>
<p>web → Django 后端</p>
</li>
<li>
<p>db → PostgreSQL 数据库</p>
</li>
</ol>
<hr>
<p>docker-compose.yml 示例</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">version: &quot;3.9&quot;</span><br><span class="line"></span><br><span class="line">services:</span><br><span class="line">  web:</span><br><span class="line">    image: my_django_app:latest   # 已构建的 Django 镜像</span><br><span class="line">    container_name: web_backend</span><br><span class="line">    ports:</span><br><span class="line">      - &quot;8000:8000&quot;               # 映射宿主机端口</span><br><span class="line">    volumes:</span><br><span class="line">      - ./web_app:/app             # 挂载本地项目目录</span><br><span class="line">      - ./web_app/.env:/app/.env:ro  # 挂载只读环境文件</span><br><span class="line">    depends_on:</span><br><span class="line">      - db                        # 确保 db 服务先启动</span><br><span class="line">    environment:</span><br><span class="line">      - DEBUG=1</span><br><span class="line"></span><br><span class="line">  db:</span><br><span class="line">    image: postgres:15</span><br><span class="line">    container_name: postgres_db</span><br><span class="line">    restart: always</span><br><span class="line">    environment:</span><br><span class="line">      POSTGRES_USER: user</span><br><span class="line">      POSTGRES_PASSWORD: password</span><br><span class="line">      POSTGRES_DB: mydb</span><br><span class="line">    volumes:</span><br><span class="line">      - db_data:/var/lib/postgresql/data</span><br><span class="line"></span><br><span class="line">volumes:</span><br><span class="line">  db_data:</span><br></pre></td></tr></table></figure>
<hr>
<p>对应 Docker 命令解释</p>
<table>
<thead>
<tr>
<th><strong>Compose 配置</strong></th>
<th><strong>对应的 Docker 命令</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>image: my_django_app:latest</td>
<td><code>docker run my_django_app:latest</code></td>
</tr>
<tr>
<td>ports: - “8000:8000”</td>
<td><code>docker run -p 8000:8000</code></td>
</tr>
<tr>
<td>volumes: - ./web_app:/app</td>
<td><code>docker run -v $(pwd)/web_app:/app</code></td>
</tr>
<tr>
<td>volumes: - ./web_app/.env:/app/.env:ro</td>
<td><code>docker run -v $(pwd)/web_app/.env:/app/.env:ro</code></td>
</tr>
<tr>
<td>depends_on: - db</td>
<td>手动顺序启动 <code>docker run -d db </code>再 <code>docker run web</code></td>
</tr>
<tr>
<td>environment:</td>
<td><code>docker run -e DEBUG=1</code></td>
</tr>
<tr>
<td>volumes: db_data:/var/lib/postgresql/data</td>
<td><code>docker volume create db_data &amp;&amp; docker run -v db_data:/var/lib/postgresql/data</code></td>
</tr>
</tbody>
</table>
<hr>
<p>使用 Docker Compose 命令</p>
<ol>
<li>构建镜像（如果 Dockerfile 在当前目录）：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker compose build</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>启动所有服务：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker compose up</span><br></pre></td></tr></table></figure>
<ul>
<li>使用 -d 后台运行：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker compose up -d</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>停止服务：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker compose down</span><br></pre></td></tr></table></figure>
<ul>
<li>会停止并删除容器，但默认不会删除卷（数据持久化保留）。</li>
</ul>
<ol start="4">
<li>查看日志：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker compose logs -f web</span><br></pre></td></tr></table></figure>
<hr>
<p>优点</p>
<ul>
<li>
<p>不用手动写多个 docker run 命令，Compose 自动管理依赖顺序和网络。</p>
</li>
<li>
<p>可以挂载卷、设置环境变量、映射端口，非常适合开发和多服务部署。</p>
</li>
</ul>
<hr>
<ol>
<li><a target="_blank" rel="noopener" href="https://docs.docker.com/get-started/introduction/build-and-push-first-image/">Docker官方</a></li>
<li><a target="_blank" rel="noopener" href="https://yeasy.gitbook.io/docker_practice">Docker从入门到实践</a></li>
</ol>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2025-05-28T12:35:00.000Z" title="2025/5/28 21:35:00">2025-05-28</time>发表</span><span class="level-item"><time dateTime="2025-05-28T12:35:00.645Z" title="2025/5/28 21:35:00">2025-05-28</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E6%8A%80%E8%83%BD%E5%AD%A6%E4%B9%A0/">技能学习</a><span> / </span><a class="link-muted" href="/categories/%E6%8A%80%E8%83%BD%E5%AD%A6%E4%B9%A0/%E4%BB%A3%E7%A0%81%E7%AE%A1%E7%90%86/">代码管理</a></span><span class="level-item">6 分钟读完 (大约918个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2025/05/28/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-wandb/">深度学习-wandb</a></p><div class="content"><p><a target="_blank" rel="noopener" href="https://wandb.ai/site/">wandb</a>是一个机器/深度学习可视化监督工具。</p>
<p>它将实验的运行内容、GPU运行状况同步到网络平台，可随时监察运行情况。</p>
<p>本文将介绍在Python（Pytorch）的环境下wandb的使用方法。</p></div><a class="article-more button is-small is-size-7" href="/2025/05/28/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-wandb/#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2024-11-20T01:41:12.000Z" title="2024/11/20 10:41:12">2024-11-20</time>发表</span><span class="level-item"><time dateTime="2024-11-20T01:41:12.615Z" title="2024/11/20 10:41:12">2024-11-20</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E6%8A%80%E8%83%BD%E5%AD%A6%E4%B9%A0/">技能学习</a><span> / </span><a class="link-muted" href="/categories/%E6%8A%80%E8%83%BD%E5%AD%A6%E4%B9%A0/%E4%BB%A3%E7%A0%81%E7%AE%A1%E7%90%86/">代码管理</a></span><span class="level-item">10 分钟读完 (大约1484个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2024/11/20/%E4%BD%BF%E7%94%A8pyinstaller%E5%B0%86Python%E6%96%87%E4%BB%B6%E6%89%93%E5%8C%85%E6%88%90exe/">使用pyinstaller将Python文件打包成exe</a></p><div class="content"><p>本文介绍如何使用<code>pyinstaller</code>将<code>.py</code>文件打包成exe。</p></div><a class="article-more button is-small is-size-7" href="/2024/11/20/%E4%BD%BF%E7%94%A8pyinstaller%E5%B0%86Python%E6%96%87%E4%BB%B6%E6%89%93%E5%8C%85%E6%88%90exe/#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-11-18T08:55:08.000Z" title="2023/11/18 17:55:08">2023-11-18</time>发表</span><span class="level-item"><time dateTime="2025-04-11T04:33:35.374Z" title="2025/4/11 13:33:35">2025-04-11</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E6%8A%80%E8%83%BD%E5%AD%A6%E4%B9%A0/">技能学习</a><span> / </span><a class="link-muted" href="/categories/%E6%8A%80%E8%83%BD%E5%AD%A6%E4%B9%A0/%E4%BB%A3%E7%A0%81%E7%AE%A1%E7%90%86/">代码管理</a></span><span class="level-item">3 分钟读完 (大约419个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/11/18/Python%E9%A1%B9%E7%9B%AE%E4%B8%8E%E5%88%AB%E4%BA%BA%E5%88%86%E4%BA%AB/">Python项目与别人分享</a></p><div class="content"><p>当有一个项目，想打包给自己的朋友的时候，需要做什么呢？<br>
献给小白的你我他。</p></div><a class="article-more button is-small is-size-7" href="/2023/11/18/Python%E9%A1%B9%E7%9B%AE%E4%B8%8E%E5%88%AB%E4%BA%BA%E5%88%86%E4%BA%AB/#more">阅读更多</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-07-23T12:11:42.000Z" title="2023/7/23 21:11:42">2023-07-23</time>发表</span><span class="level-item"><time dateTime="2025-04-11T04:41:16.363Z" title="2025/4/11 13:41:16">2025-04-11</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E6%8A%80%E8%83%BD%E5%AD%A6%E4%B9%A0/">技能学习</a><span> / </span><a class="link-muted" href="/categories/%E6%8A%80%E8%83%BD%E5%AD%A6%E4%B9%A0/%E4%BB%A3%E7%A0%81%E7%AE%A1%E7%90%86/">代码管理</a></span><span class="level-item">13 分钟读完 (大约1988个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/07/23/git%E4%B8%8Egithub%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/">git与github使用方法</a></p><div class="content"><p>学习一下如何使用git与github对代码进行管理</p></div><a class="article-more button is-small is-size-7" href="/2023/07/23/git%E4%B8%8Egithub%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/#more">阅读更多</a></article></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/img/DSCF4111.JPG" alt="周大猛"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">周大猛</p><p class="is-size-6 is-block">擅长写三流的代码,一流的bug</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>China</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">56</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">23</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">63</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/ZhouWentong7" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/ZhouWentong7"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com"><i class="fab fa-twitter"></i></a></div></div></div><!--!--><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://hexo.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Hexo</span></span><span class="level-right"><span class="level-item tag">hexo.io</span></span></a></li></ul></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-08-21T11:26:57.000Z">2025-08-21</time></p><p class="title"><a href="/2025/08/21/Docker%E5%9F%BA%E7%A1%80/">Docker基础</a></p><p class="categories"><a href="/categories/%E6%8A%80%E8%83%BD%E5%AD%A6%E4%B9%A0/">技能学习</a> / <a href="/categories/%E6%8A%80%E8%83%BD%E5%AD%A6%E4%B9%A0/%E4%BB%A3%E7%A0%81%E7%AE%A1%E7%90%86/">代码管理</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-07-23T01:39:32.000Z">2025-07-23</time></p><p class="title"><a href="/2025/07/23/Pytorch%E8%87%AA%E5%8A%A8%E6%B7%B7%E5%90%88%E7%B2%BE%E5%BA%A6AMP%E5%87%BA%E7%8E%B0Loss%E5%8F%98%E4%B8%BANaN/">Pytorch自动混合精度AMP出现Loss变为NaN</a></p><p class="categories"><a href="/categories/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/">技术学习</a> / <a href="/categories/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/">深度学习</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-07-03T01:51:43.000Z">2025-07-03</time></p><p class="title"><a href="/2025/07/03/Pytorch%E6%9F%A5%E7%9C%8B%E6%A8%A1%E5%9E%8B%E7%BB%93%E6%9E%84/">Pytorch查看模型结构</a></p><p class="categories"><a href="/categories/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/">技术学习</a> / <a href="/categories/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/">深度学习</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-06-08T17:05:49.000Z">2025-06-09</time></p><p class="title"><a href="/2025/06/09/%E8%AF%BB%E5%90%8E%E6%84%9F-%E6%88%91%E4%B8%8E%E5%9C%B0%E5%9D%9B/">读后感-我与地坛</a></p><p class="categories"><a href="/categories/%E7%94%9F%E6%B4%BB/">生活</a> / <a href="/categories/%E7%94%9F%E6%B4%BB/%E9%98%85%E8%AF%BB/">阅读</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-05-31T06:10:50.000Z">2025-05-31</time></p><p class="title"><a href="/2025/05/31/Python-%E9%9A%90%E8%97%8F%E5%8F%98%E9%87%8F/">Python-隐藏变量</a></p><p class="categories"><a href="/categories/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/">技术学习</a> / <a href="/categories/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/Python%E6%8A%80%E5%B7%A7/">Python技巧</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2025/08/"><span class="level-start"><span class="level-item">八月 2025</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2025/07/"><span class="level-start"><span class="level-item">七月 2025</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2025/06/"><span class="level-start"><span class="level-item">六月 2025</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2025/05/"><span class="level-start"><span class="level-item">五月 2025</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li><li><a class="level is-mobile" href="/archives/2025/04/"><span class="level-start"><span class="level-item">四月 2025</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile" href="/archives/2025/03/"><span class="level-start"><span class="level-item">三月 2025</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/11/"><span class="level-start"><span class="level-item">十一月 2024</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/08/"><span class="level-start"><span class="level-item">八月 2024</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/06/"><span class="level-start"><span class="level-item">六月 2024</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/05/"><span class="level-start"><span class="level-item">五月 2024</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/03/"><span class="level-start"><span class="level-item">三月 2024</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/02/"><span class="level-start"><span class="level-item">二月 2024</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/11/"><span class="level-start"><span class="level-item">十一月 2023</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/07/"><span class="level-start"><span class="level-item">七月 2023</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/06/"><span class="level-start"><span class="level-item">六月 2023</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/04/"><span class="level-start"><span class="level-item">四月 2023</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li></ul></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">follow.it</h3><form action="" method="post" target="_blank"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="订阅"></div></div></form></div></div></div><div class="column-right-shadow is-hidden-widescreen is-sticky"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3 is-sticky"><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/"><span class="level-start"><span class="level-item">技术学习</span></span><span class="level-end"><span class="level-item tag">16</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/Python%E6%8A%80%E5%B7%A7/"><span class="level-start"><span class="level-item">Python技巧</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"><span class="level-start"><span class="level-item">深度学习</span></span><span class="level-end"><span class="level-item tag">15</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/LLM/"><span class="level-start"><span class="level-item">LLM</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="/categories/%E6%8A%80%E8%83%BD%E5%AD%A6%E4%B9%A0/"><span class="level-start"><span class="level-item">技能学习</span></span><span class="level-end"><span class="level-item tag">21</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E6%8A%80%E8%83%BD%E5%AD%A6%E4%B9%A0/Hexo/"><span class="level-start"><span class="level-item">Hexo</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%8A%80%E8%83%BD%E5%AD%A6%E4%B9%A0/Java/"><span class="level-start"><span class="level-item">Java</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E6%8A%80%E8%83%BD%E5%AD%A6%E4%B9%A0/Java/%E7%8E%AF%E5%A2%83/"><span class="level-start"><span class="level-item">环境</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/%E6%8A%80%E8%83%BD%E5%AD%A6%E4%B9%A0/Linux/"><span class="level-start"><span class="level-item">Linux</span></span><span class="level-end"><span class="level-item tag">3</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E6%8A%80%E8%83%BD%E5%AD%A6%E4%B9%A0/Linux/wsl/"><span class="level-start"><span class="level-item">wsl</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%8A%80%E8%83%BD%E5%AD%A6%E4%B9%A0/Linux/%E9%85%8D%E7%BD%AE/"><span class="level-start"><span class="level-item">配置</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/%E6%8A%80%E8%83%BD%E5%AD%A6%E4%B9%A0/markdown/"><span class="level-start"><span class="level-item">markdown</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%8A%80%E8%83%BD%E5%AD%A6%E4%B9%A0/%E4%BB%A3%E7%A0%81%E7%AE%A1%E7%90%86/"><span class="level-start"><span class="level-item">代码管理</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%8A%80%E8%83%BD%E5%AD%A6%E4%B9%A0/%E7%A1%AC%E4%BB%B6/"><span class="level-start"><span class="level-item">硬件</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/%E7%94%9F%E6%B4%BB/"><span class="level-start"><span class="level-item">生活</span></span><span class="level-end"><span class="level-item tag">12</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E7%94%9F%E6%B4%BB/%E7%95%99%E5%AD%A6/"><span class="level-start"><span class="level-item">留学</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/categories/%E7%94%9F%E6%B4%BB/%E7%A2%8E%E7%A2%8E%E5%BF%B5/"><span class="level-start"><span class="level-item">碎碎念</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/%E7%94%9F%E6%B4%BB/%E9%98%85%E8%AF%BB/"><span class="level-start"><span class="level-item">阅读</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/%E7%9F%A5%E8%AF%86%E7%A7%91%E6%99%AE/"><span class="level-start"><span class="level-item">知识科普</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E7%9F%A5%E8%AF%86%E7%A7%91%E6%99%AE/%E8%AE%A1%E7%AE%97%E6%9C%BA/"><span class="level-start"><span class="level-item">计算机</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/"><span class="level-start"><span class="level-item">计算机基础</span></span><span class="level-end"><span class="level-item tag">3</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/Leetcode/"><span class="level-start"><span class="level-item">Leetcode</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"><span class="level-start"><span class="level-item">数据结构与算法</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/AMP/"><span class="tag">AMP</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Activation-Function/"><span class="tag">Activation Function</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Attention/"><span class="tag">Attention</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BFS/"><span class="tag">BFS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BatchNorm/"><span class="tag">BatchNorm</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BitNet/"><span class="tag">BitNet</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/C%E8%AF%AD%E8%A8%80/"><span class="tag">C语言</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/DFS/"><span class="tag">DFS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Hexo/"><span class="tag">Hexo</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Image-Segmentation/"><span class="tag">Image Segmentation</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Java/"><span class="tag">Java</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/LLM/"><span class="tag">LLM</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/LayerNorm/"><span class="tag">LayerNorm</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Leaky-ReLU/"><span class="tag">Leaky ReLU</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Linux/"><span class="tag">Linux</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Python/"><span class="tag">Python</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ReLU/"><span class="tag">ReLU</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Sigmoid/"><span class="tag">Sigmoid</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Software-Development/"><span class="tag">Software Development</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Windows/"><span class="tag">Windows</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/deep-learning/"><span class="tag">deep learning</span><span class="tag">14</span></a></div><div class="control"><a class="tags has-addons" href="/tags/docker/"><span class="tag">docker</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/front-end/"><span class="tag">front end</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/git/"><span class="tag">git</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/github/"><span class="tag">github</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/hexo/"><span class="tag">hexo</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/machine-learning/"><span class="tag">machine learning</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/markdown/"><span class="tag">markdown</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/pytorch/"><span class="tag">pytorch</span><span class="tag">10</span></a></div><div class="control"><a class="tags has-addons" href="/tags/softmax/"><span class="tag">softmax</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ssh/"><span class="tag">ssh</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/vscode/"><span class="tag">vscode</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/wandb/"><span class="tag">wandb</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/wsl/"><span class="tag">wsl</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E4%BB%A3%E7%A0%81%E7%AE%A1%E7%90%86/"><span class="tag">代码管理</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%86%99%E4%BD%9C/"><span class="tag">写作</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%93%88%E5%B8%8C/"><span class="tag">哈希</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%9B%BE/"><span class="tag">图</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/"><span class="tag">排序算法</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%90%9C%E7%B4%A2%E7%AE%97%E6%B3%95/"><span class="tag">搜索算法</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%95%B0%E6%8D%AE%E6%81%A2%E5%A4%8D/"><span class="tag">数据恢复</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"><span class="tag">数据结构与算法</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%96%87%E4%BB%B6%E8%AF%BB%E5%8F%96/"><span class="tag">文件读取</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%9F%BA%E7%A1%80/"><span class="tag">机器学习基础</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%A0%88/"><span class="tag">栈</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%A6%82%E7%8E%87%E8%AE%BA/"><span class="tag">概率论</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"><span class="tag">深度学习</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%BF%80%E6%B4%BB%E5%87%BD%E6%95%B0/"><span class="tag">激活函数</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%94%9F%E6%B4%BB/"><span class="tag">生活</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%A1%AC%E4%BB%B6/"><span class="tag">硬件</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%A2%8E%E7%A2%8E%E5%BF%B5/"><span class="tag">碎碎念</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%A7%91%E7%A0%94/"><span class="tag">科研</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%BB%88%E7%AB%AF%E5%91%BD%E4%BB%A4/"><span class="tag">终端命令</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%AF%84%E4%BB%B7%E6%8C%87%E6%A0%87/"><span class="tag">评价指标</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%AF%BB%E5%90%8E%E6%84%9F/"><span class="tag">读后感</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%B4%9D%E5%8F%B6%E6%96%AF/"><span class="tag">贝叶斯</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%93%BE%E8%A1%A8/"><span class="tag">链表</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%9A%8F%E6%8B%8D/"><span class="tag">随拍</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%9A%8F%E7%AC%94/"><span class="tag">随笔</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%9A%90%E7%A7%81%E4%BF%9D%E6%8A%A4/"><span class="tag">隐私保护</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%A1%B9%E7%9B%AE%E5%88%86%E4%BA%AB/"><span class="tag">项目分享</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86/"><span class="tag">项目管理</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%A2%91%E7%8E%87%E6%B4%BE/"><span class="tag">频率派</span><span class="tag">1</span></a></div></div></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/">一个小角落</a><p class="is-size-7"><span>&copy; 2025 Zhou</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a><br><span id="busuanzi_container_site_uv">共<span id="busuanzi_value_site_uv">0</span>个访客</span></p><p class="is-size-7">© 2019</p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Go to My GitHub" href="https://github.com/ZhouWentong7"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-cn");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><script type="text/javascript" id="MathJax-script" async>MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']]
      },
      svg: {
        fontCache: 'global'
      },
      chtml: {
        matchFontHeight: false
      }
    };</script><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js"></script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script>+           +           +           <script src="https://cdn.jsdelivr.net/npm/mermaid@10.4.0/dist/mermaid.min.js"></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>